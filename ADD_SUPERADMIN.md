# Добавление пользователя как суперадмина системы

**Важно**: Superadmin - это системный администратор, который управляет всей системой целиком и имеет доступ ко всем workspace. Superadmin НЕ привязан к конкретному workspace.

## Способ 1: Через скрипт (рекомендуется)

### Создание нового суперадмина
```bash
npm run create-superadmin
```

Это создаст пользователя:
- Email: `superadmin@local`
- Password: `password`
- Role: System Superadmin (доступ ко всем workspace)

### Назначение существующего пользователя суперадмином
```bash
npm run add-superadmin <userId|email>
```

Примеры:
```bash
# По ID пользователя
npm run add-superadmin 1

# По email пользователя
npm run add-superadmin admin@example.com
```

## Способ 2: Через API (для назначения существующего пользователя)

**Примечание**: API endpoint для назначения суперадмина будет добавлен позже. Пока используйте скрипты.

## Способ 3: Через Prisma Studio

1. Откройте Prisma Studio:
   ```bash
   npx prisma studio
   ```

2. Перейдите в таблицу `User`

3. Найдите нужного пользователя и установите:
   - `isSuperAdmin`: `true`

## Способ 4: Прямой SQL запрос

```sql
-- Установить пользователя как суперадмина системы
UPDATE "User" 
SET "isSuperAdmin" = true 
WHERE "id" = 1;
```

## Проверка

После назначения пользователя суперадмином, он автоматически получит:
- Доступ ко всем эндпоинтам системы, независимо от требуемых пермишенов
- Доступ ко всем workspace (видит все workspace в списке)
- Полные права на управление системой

Проверить можно:
1. Через API: `GET /workspaces` - суперадмин увидит все workspace
2. Через Prisma Studio: проверить поле `isSuperAdmin` в таблице `User`

## Важные замечания

- **Superadmin - это системный администратор**, не привязан к workspace
- Superadmin управляет всей системой целиком и всеми workspace
- Superadmin имеет доступ ко всем эндпоинтам автоматически
- Флаг `isSuperAdmin` проверяется в `PermissionsGuard` перед проверкой пермишенов
- Superadmin автоматически проходит проверку `WorkspaceMemberGuard` для любого workspace
- Для безопасности рекомендуется ограничить количество суперадминов (1-2 человека)
- Superadmin не требует членства в workspace для доступа к нему

